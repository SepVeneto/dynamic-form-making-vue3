var T=Object.defineProperty,B=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var F=(e,l,o)=>l in e?T(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,_=(e,l)=>{for(var o in l||(l={}))G.call(l,o)&&F(e,o,l[o]);if(S)for(var o of S(l))M.call(l,o)&&F(e,o,l[o]);return e},x=(e,l)=>B(e,R(l));import{c as W,u as Y,d as f,I as K,a as z,r as m,b as V,e as t,f as a,g as C,m as E,o as H,h as Q,i as X,w as Z,F as ee,j as g,t as te,k as le,l as ae}from"./vendor.de5b6130.js";const oe=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};oe();const w=Symbol();function A(){return Y(w)}function D(e,l){for(let o=0;o<e.length;++o){if(e[o].prop===l)return e;if(e[o].elements){const r=D(e[o].elements,l);if(r)return r}}return!1}const j=W({state:{id:0,config:{config:{},data:[]},current:{}},mutations:{INCREASE_ID(e){e.id+=1},DELETE_CONFIG(e,l){const o=D(e.config.data,l.prop);if(!o)return;const r=o.findIndex(n=>n.prop===l.prop);o.splice(r,1)},COPY_CONFIG(e,l){const o=D(e.config.data,l.prop);!o||(o.push(x(_({},l),{id:e.id,prop:`${l.type}-${Date.now()}`})),j.commit("INCREASE_ID"))},UPDATE_CONFIG(e,l){e.config=l},UPDATE_SELECT(e,l){e.current=l}}});var N=f({name:"comp-mask",components:{IconDelete:K,IconCopy:z},props:{mask:Boolean,data:Object},setup(e,l){m(!1);const o=A();function r(){o.commit("DELETE_CONFIG",e.data)}function n(){o.commit("COPY_CONFIG",e.data)}function s(c){c.stopPropagation(),o.commit("UPDATE_SELECT",e.data)}const i=V(()=>{var c;return o.state.current.prop===((c=e.data)==null?void 0:c.prop)}),d=V(()=>{var c;return["layout"].includes((c=e.data)==null?void 0:c.type)});return()=>{var c,p;return t("div",{class:["mask-wrap",{"is-selected":i.value},{"is-layout":d.value}],onClick:s},[t("div",{class:{mask:e.mask}},[(p=(c=l.slots).default)==null?void 0:p.call(c)]),t("div",{class:"operate more"},[t(a("el-icon"),{class:"icon",onClick:r},{default:()=>[t(a("icon-delete"),null,null)]}),t(a("el-icon"),{class:"icon",onClick:n},{default:()=>[t(a("icon-copy"),null,null)]})])])}}}),ne=f({name:"components-draggable",components:{draggable:C,compMask:N},props:{list:Array,data:{type:Object,required:!0}},setup(e,l){return()=>t(C,E(l.attrs,{list:e.list,"item-key":"id",tag:"transition-group","component-data":{tag:"div",name:"list"}}),{item:({element:o})=>{if(o.type==="layout")return t(a("comp-mask"),{data:o},{default:()=>[t(a("el-row"),null,{default:()=>{var r;return[(r=o.elements)==null?void 0:r.map(n=>t(a("el-col"),{span:n.col,class:"mask-wrap is-layout",style:"background: #fff;"},{default:()=>[t(a("components-draggable"),{class:"draggable-area",list:n.elements,data:e.data,"item-key":"id",group:{name:"detail"},"ghost-class":"detail-ghost"},null)]}))]}})]});if(o.type==="text")return t(a("comp-mask"),{data:o,mask:!0},{default:()=>[t(a("el-form-item"),o,{default:()=>[t("span",null,[e.data[o.prop]])]})]});if(o.type==="input")return t(a("comp-mask"),{mask:!0,data:o},{default:()=>[t(a("el-form-item"),o,{default:()=>[t(a("el-input"),null,null)]})]})}})}}),ue=f({name:"template-code",props:{config:Object},setup(e){return()=>t("div",{style:"display: inline-block"},[t("pre",null,[JSON.stringify(e.config,null,2)])])}});const re=e=>t(a("el-form"),null,{default:()=>[t(a("el-form-item"),{label:"\u6807\u7B7E"},{default:()=>[t(a("el-input"),{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l},null)]}),t(a("el-form-item"),{label:"key"},{default:()=>[t(a("el-input"),{modelValue:e.prop,"onUpdate:modelValue":l=>e.prop=l},null)]}),t(a("el-form-item"),{label:"\u5FC5\u586B"},{default:()=>[t(a("el-input"),{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l},null)]})]}),se=e=>t(a("el-form"),null,{default:()=>[t(a("el-form-item"),{label:"\u6807\u7B7E"},{default:()=>[t(a("el-input"),{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l},null)]}),t(a("el-form-item"),{label:"key"},{default:()=>[t(a("el-input"),{modelValue:e.prop,"onUpdate:modelValue":l=>e.prop=l},null)]}),t(a("el-form-item"),{label:"\u5FC5\u586B"},{default:()=>[t(a("el-checkbox"),{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l},null)]})]});function de(e){return{text:re,input:se}[e]}function ie(e){return["<template>",'  <dynamic-form :config="config" ></dynamic-form>',"</template>","",'<script lang="ts">',"export default defineComponent({",'  name: "test"',"})","<\/script>","",'<script lang="ts" setup>',`const config = ${JSON.stringify(e)}`,"<\/script>"].join(`
`)}var P=(e,l)=>{for(const[o,r]of l)e[o]=r;return e};const ce={id:"ace-editor"},pe=f({name:"AceEditor"});function me(e,{expose:l,emit:o}){const r=e;let n;H(()=>{ace.config.set("basePath","https://pagecdn.io/lib/ace/1.4.12/"),n=ace.edit("ace-editor"),n.setTheme("ace/theme/twilight"),n.session.setMode(`ace/mode/${r.type}`),n.on("change",()=>{o("update:modelValue",n.getValue())}),r.modelValue&&n.session.setValue(r.modelValue)});function s(){const d=n.getSession();d.setValue(JSON.stringify(JSON.parse(d.getValue()),null,2))}function i(){return n.getValue()}return l({getContent:i,beauty:s}),(d,c)=>(X(),Q("div",ce))}const fe=f(x(_({},pe),{props:{type:{default:"html"},content:null,modelValue:null},emits:["update:modelValue"],setup:me}));var ge=P(fe,[["__scopeId","data-v-7f809a68"]]),ve=f({components:{draggable:C,componentsDraggable:ne,templateCode:ue,aceEditor:ge},setup(){const e=m({data:[],config:{}}),l=A();Z(()=>e.value,u=>{l.commit("UPDATE_CONFIG",u)},{deep:!0});const o={name:"venento"},r=m([{label:"\u6587\u672C",prop:"text",component:"<span>\u6587\u672C</span>"},{label:"\u8F93\u5165\u6846",prop:"input",component:"<el-input />"},{label:"\u6805\u683C",prop:"layout"}]);m(!1);const n=({element:u})=>t("div",null,[u.label]),s=m(!1),i=V(()=>ie(e.value)),d=m({}),c=m(!1);function p(){const u=l.state.id;return l.commit("INCREASE_ID"),u}function y(u){return u.prop==="layout"?{id:p(),type:u.prop,prop:`${u.prop}-${Date.now()}`,elements:[{col:12,elements:[]},{col:12,elements:[]}]}:{id:p(),type:u.prop,label:u.label,prop:`${u.prop}-${Date.now()}`}}function v(){window.parent.postMessage({action:"download",data:{code:i.value}},"*")}function h(){k.value.beauty()}const b=m(!1);function O(){b.value=!0}const k=m();function J(){const u=k.value.getContent();d.value=JSON.parse(u),console.log(d.value),b.value=!1}const I=m(!1),U=m("");function L(){e.value=JSON.parse(U.value)}return()=>t(ee,null,[t("header",null,[t(a("el-button"),{type:"text",onClick:()=>s.value=!0},{default:()=>[g("\u751F\u6210\u4EE3\u7801")]}),t(a("el-button"),{type:"text",onClick:()=>I.value=!0},{default:()=>[g("\u5BFC\u5165\u914D\u7F6E")]}),t(a("el-button"),{type:"text",onClick:()=>c.value=!0},{default:()=>[g("\u9884\u89C8")]})]),t(a("el-row"),null,{default:()=>[t(a("el-col"),{span:4},{default:()=>[t(C,{list:r.value,"item-key":"prop",sort:!1,group:{name:"detail",pull:"clone",put:!1},clone:u=>y(u)},{item:n})]}),t(a("el-col"),{span:14},{default:()=>[t(a("el-form"),e.value.config,{default:()=>[t(a("components-draggable"),{class:"edit-area",style:"flex: 1",list:e.value.data,"item-key":"id",group:{name:"detail"},data:o,"ghost-class":"detail-ghost"},null)]})]}),t(a("el-col"),{span:6},{default:()=>[t(a("el-card"),null,{default:()=>[t("aside",{class:"item-config"},[t(a("el-tabs"),null,{default:()=>[t(a("el-tab-pane"),{label:"\u8868\u5355\u5C5E\u6027"},{default:()=>[t(a("el-form"),null,{default:()=>[t(a("el-form-item"),{label:"\u884C\u5185\u8868\u5355\u6A21\u5F0F"},{default:()=>[t(a("el-checkbox"),{modelValue:e.value.config.inline,"onUpdate:modelValue":u=>e.value.config.inline=u},null)]}),t(a("el-form-item"),{label:"\u8868\u5355\u57DF\u6807\u7B7E\u5BBD\u5EA6"},{default:()=>[t(a("el-input"),{modelValue:e.value.config.labelWidth,"onUpdate:modelValue":u=>e.value.config.labelWidth=u},null)]}),t(a("el-form-item"),{label:"\u8868\u5355\u57DF\u6807\u7B7E\u540E\u7F00"},{default:()=>[t(a("el-input"),{modelValue:e.value.config.labelSuffix,"onUpdate:modelValue":u=>e.value.config.labelSuffix=u},null)]}),t(a("el-form-item"),{label:"\u662F\u5426\u663E\u793A\u5FC5\u586B\u5B57\u6BB5\u7684\u6807\u7B7E\u65C1\u8FB9\u7684\u7EA2\u8272\u661F\u53F7"},{default:()=>[t(a("el-checkbox"),{modelValue:e.value.config.hideRequiredAsterisk,"onUpdate:modelValue":u=>e.value.config.hideRequiredAsterisk=u},null)]}),t(a("el-form-item"),{label:"\u662F\u5426\u5728\u8F93\u5165\u6846\u4E2D\u663E\u793A\u6821\u9A8C\u7ED3\u679C\u53CD\u9988\u56FE\u6807	"},{default:()=>[t(a("el-checkbox"),{modelValue:e.value.config.statusIcon,"onUpdate:modelValue":u=>e.value.config.statusIcon=u},null)]})]})]}),t(a("el-tab-pane"),{label:"\u8868\u5355\u57DF\u5C5E\u6027"},{default:()=>{var u;return[(u=de(l.state.current.type))==null?void 0:u(l.state.current)]}})]})])]})]})]}),t("footer",null,[t(a("dynamic-form"),{config:e.value},null)]),t("pre",{style:"text-align: left;"},[JSON.stringify(e.value,null,2)]),t(a("el-dialog"),{modelValue:s.value,"onUpdate:modelValue":u=>s.value=u,"destroy-on-close":!0},{default:()=>[t(a("ace-editor"),{modelValue:i.value,"onUpdate:modelValue":u=>i.value=u},null),t(a("el-button"),{type:"text",onClick:v},{default:()=>[g("\u4E0B\u8F7D\u6587\u4EF6")]})]}),t(a("el-dialog"),{modelValue:b.value,"onUpdate:modelValue":u=>b.value=u,"destroy-on-close":!0},{default:()=>[t(a("ace-editor"),{ref:k,type:"json",modelValue:JSON.stringify(d.value,null,2)},null),t(a("el-button"),{type:"primary",onClick:J},{default:()=>[g("\u786E\u5B9A")]})]}),t(a("el-dialog"),{modelValue:I.value,"onUpdate:modelValue":u=>I.value=u,"destroy-on-close":!0},{default:()=>[t(a("ace-editor"),{ref:k,type:"json",modelValue:U.value,"onUpdate:modelValue":u=>U.value=u},null),t(a("el-button"),{type:"primary",onClick:L},{default:()=>[g("\u786E\u5B9A")]}),t(a("el-button"),{type:"primary",onClick:h},{default:()=>[g("\u683C\u5F0F\u5316")]})]}),t(a("el-dialog"),{modelValue:c.value,"onUpdate:modelValue":u=>c.value=u},{default:()=>[t("header",null,[t(a("el-button"),{type:"text",onClick:O},{default:()=>[g("\u5BFC\u5165\u6570\u636E")]})]),t(a("dynamic-form"),{config:e.value,modelValue:d.value,"onUpdate:modelValue":u=>d.value=u},{vv:u=>t("div",null,[JSON.stringify(u)])})]})])}});var ye=P(ve,[["__scopeId","data-v-95a6f488"]]);function q(e,l,o){const r=l[o],n=e[r];return typeof n=="object"&&!Array.isArray(n)?q(n,l,o+1):n}function be(e,l){const o=l.split(".");return q(e,o,0)}function Ve(e,l,o){const r=l.split(".");let n=1,s=0;r.length===1&&(e[l]=o);let i=e;for(;n<r.length;++n,++s){const d=r[s];i[d]==null&&(i[d]={}),i=i[d]}i[r[r.length-1]]=o}var _e=f({name:"RenderFormItem",props:{config:{type:Object,required:!0}},setup(e,l){const o=V(()=>e.config.prop);return()=>t(a("el-form-item"),e.config,{default:()=>{var r,n,s,i,d;return[(d=(n=(r=l.slots)[o.value])==null?void 0:n.call(r,e.config))!=null?d:(i=(s=l.slots).default)==null?void 0:i.call(s,e.config)]}})}}),he=f({name:"dynamic-form-item",components:{renderFormItem:_e},props:{config:{type:Object,required:!0},data:{type:Object,required:!0,default:()=>({})}},emits:["update:modelValue"],setup(e,l){const{config:o}=te(e);function r(p,y){const v=_({},e.data);Ve(v,y,p),l.emit("update:modelValue",v)}const n=V({get:()=>be(e.data,o.value.prop),set:p=>{r(p,o.value.prop)}}),d={text:()=>t("span",null,[n.value]),input:()=>t(a("el-input"),{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p},null)},c=()=>t(a("render-form-item"),{config:o.value},_({default:()=>{var p;return[(p=d[o.value.type])==null?void 0:p.call(d)]}},l.slots));return()=>o.value.type==="layout"?t(a("el-row"),null,{default:()=>{var y;return[(y=o.value.elements)==null?void 0:y.map(v=>t(a("el-col"),{span:v.col},{default:()=>{var h;return[(h=v.elements)==null?void 0:h.map(b=>t(a("dynamic-form-item"),E({config:b,data:e.data},{"onUpdate:modelValue":O=>l.emit("update:modelValue",O)}),l.slots))]}}))]}}):c()}}),$=f({name:"dynamic-form",props:{config:Object,modelValue:Object},emits:["update:modelValue"],components:{dynamicFormItem:he},setup(e,l){const o=V(()=>e.config.config);return()=>t(a("el-form"),E(o.value,{model:e.modelValue}),{default:()=>{var r;return[(r=e.config)==null?void 0:r.data.map(n=>t(a("dynamic-form-item"),E({config:n,data:e.modelValue},{"onUpdate:modelValue":s=>l.emit("update:modelValue",s)}),l.slots))]}})}});const ke=function(){return{install:l=>{l.component($.name,$)}}};var Ce=ke();le(ye).use(ae).use(j,w).use(Ce).component(N.name,N).mount("#app");
